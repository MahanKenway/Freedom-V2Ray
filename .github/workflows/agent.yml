name: GitClaw Agent

on:
  issues:
    types: [opened, edited]
  issue_comment:
    types: [created, edited]

jobs:
  agent:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      contents: read
      actions: write
    
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Setup jq
        run: sudo apt-get install -y jq

      - name: Process Issue (Smart Bot)
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
          ISSUE_NUMBER: ${{ github.event.issue.number }}
          ISSUE_BODY: ${{ github.event.issue.body }}
          ISSUE_USER: ${{ github.event.issue.user.login }}
        run: |
          BODY_LOWER=$(echo "$ISSUE_BODY" | tr '[:upper:]' '[:lower:]')
          
          # ============================================
          # ุฎูุงูุฏู ุงุทูุงุนุงุช ฺฉุงููฺฏโูุง
          # ============================================
          CONFIG_COUNT=0
          LAST_UPDATE="ูุงูุดุฎุต"
          ISP_LIST=""
          PROTOCOLS=""
          
          if [ -f "configs/all_configs.json" ]; then
            CONFIG_COUNT=$(cat configs/all_configs.json | jq '. | length')
            LAST_UPDATE=$(date -r configs/all_configs.json '+%Y-%m-%d %H:%M' 2>/dev/null || echo "ูุงูุดุฎุต")
            
            # ุงุณุชุฎุฑุงุฌ ISP ูุง
            ISP_LIST=$(cat configs/all_configs.json | jq -r '[.[].isp // empty] | unique | join(", ")' 2>/dev/null || echo "")
            
            # ุงุณุชุฎุฑุงุฌ ูพุฑูุชฺฉูโูุง
            PROTOCOLS=$(cat configs/all_configs.json | jq -r '[.[].protocol // empty] | unique | join(", ")' 2>/dev/null || echo "")
          fi
          
          # ============================================
          # ุชุงุจุน ุงุฑุณุงู ูพุงุณุฎ
          # ============================================
          send_response() {
            curl -s -X POST \
              -H "Authorization: token $GITHUB_TOKEN" \
              -H "Content-Type: application/json" \
              -d "{\"body\":\"$1\"}" \
              https://api.github.com/repos/${{ github.repository }}/issues/$ISSUE_NUMBER/comments
          }
          
          # ============================================
          # ุชุงุจุน trigger collector
          # ============================================
          trigger_collector() {
            curl -s -X POST \
              -H "Authorization: token $GITHUB_TOKEN" \
              -H "Accept: application/vnd.github.v3+json" \
              https://api.github.com/repos/${{ github.repository }}/actions/workflows/collector.yml/dispatches \
              -d '{"ref":"main"}'
          }
          
          # ============================================
          # ูพุฑุฏุงุฒุด ุฏุณุชูุฑุงุช
          # ============================================
          
          # ๐ฏ ุขูพุฏุช ู ุฌูุนโุขูุฑ
          if [[ "$BODY_LOWER" == *"/update"* ]] || [[ "$BODY_LOWER" == *"ุขูพุฏุช"* ]] || [[ "$BODY_LOWER" == *"ุจุฑูุฒุฑุณุงู"* ]] || [[ "$BODY_LOWER" == *"refresh"* ]]; then
            trigger_collector
            RESPONSE="๐ **ุขูพุฏุช ุดุฑูุน ุดุฏ!**
            
โฑ๏ธ **ุฒูุงู ุชูุฑุจ:** 2-3 ุฏููู
๐ ุฏุฑ ุญุงู ุฌูุนโุขูุฑ ุงุฒ ููุงุจุน ูุฎุชูู...
๐ ุชุณุช ูพูฺฏ ู ุงุนุชุจุงุฑุณูุฌ ฺฉุงููฺฏโูุง

๐ **ูุถุนุช ูุนู:** $CONFIG_COUNT ฺฉุงููฺฏ
๐ **ุขุฎุฑู ุขูพุฏุช:** $LAST_UPDATE

๐ก **ูฺฉุชู:** ูโุชูู ูุถุนุช ุฑู ุชู ุชุจ **Actions** ฺฺฉ ฺฉู!
โณ ููุช ุชููู ุดุฏุ ู ฺฉุงููุช ุฌุฏุฏ ูโุฐุงุฑู (ุงฺฏู ุชุบุฑ ุจุงุดู)"

          # ๐ ูุถุนุช ู ุขูุงุฑ
          elif [[ "$BODY_LOWER" == *"/status"* ]] || [[ "$BODY_LOWER" == *"ูุถุนุช"* ]] || [[ "$BODY_LOWER" == *"ุขูุงุฑ"* ]] || [[ "$BODY_LOWER" == *"ุชุนุฏุงุฏ"* ]]; then
            if [ $CONFIG_COUNT -eq 0 ]; then
              RESPONSE="โ **ูููุฒ ฺฉุงููฺฏ ูุฏุงุฑู!**
              
๐ ุจุฑุง ุดุฑูุน ุฌูุนโุขูุฑ ุจููุณ:
โข **ุขูพุฏุช**
โข **/update**
โข **ุดุฑูุน**

โฑ๏ธ Collector ูุฑ ฒ ุณุงุนุช ุฎูุฏฺฉุงุฑ ูู ุงุฌุฑุง ูโุดู!"
            else
              RESPONSE="๐ **ุขูุงุฑ ฺฉุงูู ฺฉุงููฺฏโูุง**
              
โ **ุชุนุฏุงุฏ ฺฉู:** $CONFIG_COUNT ฺฉุงููฺฏ
๐ **ุขุฎุฑู ุขูพุฏุช:** $LAST_UPDATE

๐ก **ISP ูุง:** ${ISP_LIST:-ูุงูุดุฎุต}
๐ **ูพุฑูุชฺฉูโูุง:** ${PROTOCOLS:-ูุงูุดุฎุต}

๐พ **ูุญู ุฐุฎุฑู:** \`configs/all_configs.json\`
๐ **ููฺฉ ุณุงุจุณฺฉุฑูพุดู:** ุชู README ุง ูพูุดู configs/

๐ ุจุฑุง ุขูพุฏุช ุฌุฏุฏ ุจููุณ: **ุขูพุฏุช**"
            fi

          # ๐ ุณูุงู ู ุฎูุดโุขูุฏ
          elif [[ "$BODY_LOWER" == *"ุณูุงู"* ]] || [[ "$BODY_LOWER" == *"ุฏุฑูุฏ"* ]] || [[ "$BODY_LOWER" == *"ู"* ]] || [[ "$BODY_LOWER" == *"hello"* ]] || [[ "$BODY_LOWER" == *"hi"* ]]; then
            HOUR=$(date +%H)
            if [ $HOUR -ge 5 ] && [ $HOUR -lt 12 ]; then
              GREETING="ุตุจุญ ุจุฎุฑ"
            elif [ $HOUR -ge 12 ] && [ $HOUR -lt 17 ]; then
              GREETING="ุธูุฑ ุจุฎุฑ"
            elif [ $HOUR -ge 17 ] && [ $HOUR -lt 21 ]; then
              GREETING="ุนุตุฑ ุจุฎุฑ"
            else
              GREETING="ุดุจ ุจุฎุฑ"
            fi
            
            RESPONSE="๐ $GREETING **$ISSUE_USER** ุนุฒุฒ!
            
๐ค ูู **GitClaw-V2Ray** ูุณุชูุ ุฑุจุงุช ููุดููุฏ ูุฏุฑุช ฺฉุงููฺฏ!

๐ **ูุถุนุช ูุนู:** $CONFIG_COUNT ฺฉุงููฺฏ ููุฌูุฏ

๐ก **ฺฺฉุงุฑ ูโุชููู ุจุฑุงุช ุงูุฌุงู ุจุฏูุ**
โข ๐ **ุขูพุฏุช** โ ุฌูุนโุขูุฑ ฺฉุงููฺฏ ุฌุฏุฏ
โข ๐ **ูุถุนุช** โ ุขูุงุฑ ฺฉุงูู
โข ๐ **ุฑุงูููุง** โ ูุณุช ุฏุณุชูุฑุงุช
โข ๐ **ุฌุณุชุฌู** โ ูพุฏุง ฺฉุฑุฏู ฺฉุงููฺฏ ุฎุงุต

ฺ ูุงุฒ ุฏุงุฑุ ๐"

          # ๐ ุฑุงูููุง
          elif [[ "$BODY_LOWER" == *"/help"* ]] || [[ "$BODY_LOWER" == *"ุฑุงูููุง"* ]] || [[ "$BODY_LOWER" == *"ฺฉูฺฉ"* ]] || [[ "$BODY_LOWER" == *"ุฏุณุชูุฑุงุช"* ]] || [[ "$BODY_LOWER" == *"ุฑุงูููุง"* ]]; then
            RESPONSE="๐ **ุฑุงูููุง ุฌุงูุน GitClaw-V2Ray**
            
๐ฏ **ุฏุณุชูุฑุงุช ุงุตู:**
\`/update\` , \`ุขูพุฏุช\` , \`ุจุฑูุฒุฑุณุงู\` โ ุดุฑูุน ุฌูุนโุขูุฑ
\`/status\` , \`ูุถุนุช\` , \`ุขูุงุฑ\` โ ุชุนุฏุงุฏ ู ุงุทูุงุนุงุช ฺฉุงููฺฏโูุง
\`/search\` , \`ุฌุณุชุฌู\` โ ุฌุณุชุฌู ุฏุฑ ฺฉุงููฺฏโูุง (ุจู ุฒูุฏ)
\`/isp\` , \`ุงูพุฑุงุชูุฑ\` โ ููุชุฑ ุจุฑ ุงุณุงุณ ISP
\`/protocol\` , \`ูพุฑูุชฺฉู\` โ ููุชุฑ ุจุฑ ุงุณุงุณ ูพุฑูุชฺฉู
\`/best\` , \`ุจูุชุฑู\` โ ฺฉุงููฺฏโูุง ุจุง ุจูุชุฑู ูพูฺฏ
\`/random\` , \`ุชุตุงุฏู\` โ ฺูุฏ ฺฉุงููฺฏ ุชุตุงุฏู
\`/logs\` , \`ูุงฺฏ\` โ ูุดุงูุฏู ูุงฺฏโูุง ุงุฎุฑ
\`/time\` , \`ุฒูุงู\` โ ุฒูุงูโุจูุฏ ุงุฌุฑุง
\`/about\` , \`ุฏุฑุจุงุฑู\` โ ุงุทูุงุนุงุช ุฑุจุงุช
\`/help\` , \`ุฑุงูููุง\` โ ููู ูพุงู

โฐ **ุฒูุงูโุจูุฏ:**
โข Collector ูุฑ **ฒ ุณุงุนุช** ุฎูุฏฺฉุงุฑ ุงุฌุฑุง ูโุดู
โข ูโุชูู ูุฑ ููุช ุฎูุงุณุช ุฏุณุช ุงุฌุฑุง ฺฉู

๐ก **ูฺฉุชู:** ูู ููุด ูุตููุน ูุฏุงุฑู ูู ุณุฑุน ู ุฑุงฺฏุงูู! ๐"

          # ๐ ุฌุณุชุฌู ุฏุฑ ฺฉุงููฺฏโูุง
          elif [[ "$BODY_LOWER" == *"/search"* ]] || [[ "$BODY_LOWER" == *"ุฌุณุชุฌู"* ]] || [[ "$BODY_LOWER" == *"ูพุฏุง ฺฉู"* ]]; then
            # ุงุณุชุฎุฑุงุฌ ฺฉููู ุฌุณุชุฌู
            SEARCH_TERM=$(echo "$ISSUE_BODY" | sed 's/.*ุฌุณุชุฌู//; s/.*search//; s/^[[:space:]]*//' | head -c 50)
            
            if [ -f "configs/all_configs.json" ] && [ -n "$SEARCH_TERM" ]; then
              RESULTS=$(cat configs/all_configs.json | jq --arg term "$SEARCH_TERM" '[.[] | select(.server | contains($term))] | length' 2>/dev/null || echo "0")
              
              if [ "$RESULTS" -gt 0 ]; then
                RESPONSE="๐ **ูุชุงุฌ ุฌุณุชุฌู ุจุฑุง:** \`$SEARCH_TERM\`
                
โ **$RESULTS** ฺฉุงููฺฏ ูพุฏุง ุดุฏ!

๐ ุฌุฒุฆุงุช ุชู ูุงู \`configs/all_configs.json\` ูุงุจู ูุดุงูุฏู ุงุณุช.

๐ก **ูฺฉุชู:** ุจุฑุง ุฌุณุชุฌู ุฏููโุชุฑุ ุงุฒ ุฏุณุชูุฑ \`/isp\` ุง \`/protocol\` ุงุณุชูุงุฏู ฺฉู."
              else
                RESPONSE="โ **ูุชุฌูโุง ูพุฏุง ูุดุฏ!**
                
๐ ุนุจุงุฑุช: \`$SEARCH_TERM\`

๐ก **ูพุดููุงุฏ:**
โข ุงุดุชุจุงู ุชุงูพ ูุฏุงุฑุ
โข ุจุง \`/isp\` ุจุฑ ุงุณุงุณ ุงูพุฑุงุชูุฑ ุฌุณุชุฌู ฺฉู
โข ุจุง \`/protocol\` ุจุฑ ุงุณุงุณ ูพุฑูุชฺฉู ุฌุณุชุฌู ฺฉู"
              fi
            else
              RESPONSE="๐ **ุฑุงูููุง ุฌุณุชุฌู**
              
ุจุฑุง ุฌุณุชุฌู ุจููุณ:
\`ุฌุณุชุฌู [ฺฉููู ฺฉูุฏ]\`

ูุซุงู:
โข \`ุฌุณุชุฌู ุงุฑุงูุณู\`
โข \`ุฌุณุชุฌู 443\`
โข \`ุฌุณุชุฌู usa\`

โ๏ธ **ุชูุฌู:** ุงูู ุจุงุฏ ฺฉุงููฺฏ ุฏุงุดุชู ุจุงุด! ุจููุณ: **ุขูพุฏุช**"
            fi

          # ๐ ููุชุฑ ISP
          elif [[ "$BODY_LOWER" == *"/isp"* ]] || [[ "$BODY_LOWER" == *"ุงูพุฑุงุชูุฑ"* ]] || [[ "$BODY_LOWER" == *"ุงุฑุงูุณู"* ]] || [[ "$BODY_LOWER" == *"ููุฑุงู ุงูู"* ]] || [[ "$BODY_LOWER" == *"ูุฎุงุจุฑุงุช"* ]]; then
            if [ $CONFIG_COUNT -eq 0 ]; then
              RESPONSE="โ ุงูู ุจุงุฏ ฺฉุงููฺฏ ุฌูุนโุขูุฑ ฺฉู!
              
๐ ุจููุณ: **ุขูพุฏุช**"
            else
              # ุดูุงุณุง ISP
              TARGET_ISP=""
              if [[ "$BODY_LOWER" == *"ุงุฑุงูุณู"* ]]; then TARGET_ISP="Irancell"; fi
              if [[ "$BODY_LOWER" == *"ููุฑุงู ุงูู"* ]] || [[ "$BODY_LOWER" == *"mci"* ]]; then TARGET_ISP="MCI"; fi
              if [[ "$BODY_LOWER" == *"ูุฎุงุจุฑุงุช"* ]]; then TARGET_ISP="Mokhaberat"; fi
              if [[ "$BODY_LOWER" == *"ูุฎุงุจุฑุงุช"* ]]; then TARGET_ISP="TCI"; fi
              if [[ "$BODY_LOWER" == *"ุขุณุงุชฺฉ"* ]]; then TARGET_ISP="Asiatech"; fi
              if [[ "$BODY_LOWER" == *"ูพุงุฑุณ ุขููุงู"* ]]; then TARGET_ISP="ParsOnline"; fi
              if [[ "$BODY_LOWER" == *"ุดุงุชู"* ]]; then TARGET_ISP="Shatel"; fi
              if [[ "$BODY_LOWER" == *"ูุง ูุจ"* ]]; then TARGET_ISP="HiWeb"; fi
              
              if [ -n "$TARGET_ISP" ]; then
                COUNT=$(cat configs/all_configs.json | jq --arg isp "$TARGET_ISP" '[.[] | select(.isp | contains($isp))] | length' 2>/dev/null || echo "0")
                RESPONSE="๐ **ููุชุฑ ISP: $TARGET_ISP**
                
โ **$COUNT** ฺฉุงููฺฏ ูพุฏุง ุดุฏ!

๐ ุฌุฒุฆุงุช ุชู ูุงู configs/ ูุงุจู ูุดุงูุฏู ุงุณุช."
              else
                # ูุณุช ููู ISP ูุง
                ALL_ISPS=$(cat configs/all_configs.json | jq -r '[.[].isp // empty] | group_by(.) | map({name: .[0], count: length}) | sort_by(-.count) | .[] | \"โข \(.name): \(.count) ุนุฏุฏ\"' 2>/dev/null | head -10)
                
                RESPONSE="๐ **ูุณุช ISP ูุง ููุฌูุฏ:**
                
$ALL_ISPS

๐ก ุจุฑุง ููุชุฑ ุจููุณ:
\`ุงุฑุงูุณู\` , \`ููุฑุงู ุงูู\` , \`ูุฎุงุจุฑุงุช\` , ..."

              fi
            fi

          # ๐ ููุชุฑ ูพุฑูุชฺฉู
          elif [[ "$BODY_LOWER" == *"/protocol"* ]] || [[ "$BODY_LOWER" == *"ูพุฑูุชฺฉู"* ]] || [[ "$BODY_LOWER" == *"vless"* ]] || [[ "$BODY_LOWER" == *"vmess"* ]] || [[ "$BODY_LOWER" == *"trojan"* ]]; then
            if [ $CONFIG_COUNT -eq 0 ]; then
              RESPONSE="โ ุงูู ุจุงุฏ ฺฉุงููฺฏ ุฌูุนโุขูุฑ ฺฉู!
              
๐ ุจููุณ: **ุขูพุฏุช**"
            else
              TARGET_PROTO=""
              if [[ "$BODY_LOWER" == *"vless"* ]]; then TARGET_PROTO="VLESS"; fi
              if [[ "$BODY_LOWER" == *"vmess"* ]]; then TARGET_PROTO="VMESS"; fi
              if [[ "$BODY_LOWER" == *"trojan"* ]]; then TARGET_PROTO="Trojan"; fi
              if [[ "$BODY_LOWER" == *"shadowsocks"* ]] || [[ "$BODY_LOWER" == *"ss"* ]]; then TARGET_PROTO="Shadowsocks"; fi
              
              if [ -n "$TARGET_PROTO" ]; then
                COUNT=$(cat configs/all_configs.json | jq --arg proto "$TARGET_PROTO" '[.[] | select(.protocol == $proto)] | length' 2>/dev/null || echo "0")
                RESPONSE="๐ **ููุชุฑ ูพุฑูุชฺฉู: $TARGET_PROTO**
                
โ **$COUNT** ฺฉุงููฺฏ ูพุฏุง ุดุฏ!"
              else
                # ูุณุช ููู ูพุฑูุชฺฉูโูุง
                ALL_PROTOS=$(cat configs/all_configs.json | jq -r '[.[].protocol // empty] | group_by(.) | map({name: .[0], count: length}) | sort_by(-.count) | .[] | \"โข \(.name): \(.count) ุนุฏุฏ\"' 2>/dev/null)
                
                RESPONSE="๐ **ูพุฑูุชฺฉูโูุง ููุฌูุฏ:**
                
$ALL_PROTOS

๐ก ุจุฑุง ููุชุฑ ุจููุณ:
\`vless\` , \`vmess\` , \`trojan\` , ..."
              fi
            fi

          # โญ ุจูุชุฑู ฺฉุงููฺฏโูุง
          elif [[ "$BODY_LOWER" == *"/best"* ]] || [[ "$BODY_LOWER" == *"ุจูุชุฑู"* ]] || [[ "$BODY_LOWER" == *"ุณุฑุน"* ]] || [[ "$BODY_LOWER" == *"ูพูฺฏ"* ]]; then
            if [ $CONFIG_COUNT -eq 0 ]; then
              RESPONSE="โ ุงูู ุจุงุฏ ฺฉุงููฺฏ ุฌูุนโุขูุฑ ฺฉู!
              
๐ ุจููุณ: **ุขูพุฏุช**"
            else
              BEST=$(cat configs/all_configs.json | jq -r 'sort_by(.ping // 9999) | .[0:5] | .[] | \"โข \(.protocol // \"N/A\") | \(.server // \"N/A\") | ูพูฺฏ: \(.ping // \"N/A\")ms\"' 2>/dev/null || echo "ุงุทูุงุนุงุช ููุฌูุฏ ูุณุช")
              
              RESPONSE="โญ **ต ฺฉุงููฺฏ ุจุฑุชุฑ (ฺฉูุชุฑู ูพูฺฏ):**
              
$BEST

๐ก **ูฺฉุชู:** ูพูฺฏ ฺฉูุชุฑ = ุณุฑุนุช ุจูุชุฑ
โ๏ธ ูพูฺฏ ูุงูุน ููฺฉู ุงุณุช ูุชูุงูุช ุจุงุดุฏ."

            fi

          # ๐ฒ ุชุตุงุฏู
          elif [[ "$BODY_LOWER" == *"/random"* ]] || [[ "$BODY_LOWER" == *"ุชุตุงุฏู"* ]] || [[ "$BODY_LOWER" == *"random"* ]]; then
            if [ $CONFIG_COUNT -eq 0 ]; then
              RESPONSE="โ ุงูู ุจุงุฏ ฺฉุงููฺฏ ุฌูุนโุขูุฑ ฺฉู!
              
๐ ุจููุณ: **ุขูพุฏุช**"
            else
              RANDOM_CONFIGS=$(cat configs/all_configs.json | jq -r 'shuffle | .[0:3] | .[] | \"โข \(.protocol // \"N/A\") | \(.server // \"N/A\") | \(.isp // \"N/A\")\"' 2>/dev/null || echo "ุงุทูุงุนุงุช ููุฌูุฏ ูุณุช")
              
              RESPONSE="๐ฒ **ณ ฺฉุงููฺฏ ุชุตุงุฏู:**
              
$RANDOM_CONFIGS

๐ ุจุฑุง ุฏุฑุงูุช ุชุตุงุฏู ุฏฺฏูุ ุฏูุจุงุฑู ุจููุณ: **ุชุตุงุฏู**"

            fi

          # โฐ ุฒูุงูโุจูุฏ
          elif [[ "$BODY_LOWER" == *"/time"* ]] || [[ "$BODY_LOWER" == *"ุฒูุงู"* ]] || [[ "$BODY_LOWER" == *"schedule"* ]] || [[ "$BODY_LOWER" == *"ฺฉุฑูู"* ]]; then
            RESPONSE="โฐ **ุฒูุงูโุจูุฏ ุงุฌุฑุง**
            
๐ **Collector:**
โข ูุฑ **ฒ ุณุงุนุช** (00:00, 02:00, 04:00, ...)
โข ุฏุณุช: ูุฑ ููุช ุจุฎูุง ุจุง ุฏุณุชูุฑ **ุขูพุฏุช**

๐ค **Agent:**
โข ุจูุงูุงุตูู ุจุนุฏ ุงุฒ ูุฑ Issue/Comment
โข 24/7 ุขููุงู

๐ **ุขุฎุฑู ุงุฌุฑุง Collector:** $LAST_UPDATE
๐ **ุชุนุฏุงุฏ ฺฉุงููฺฏ ูุนู:** $CONFIG_COUNT"

          # ๐ ูุงฺฏโูุง
          elif [[ "$BODY_LOWER" == *"/logs"* ]] || [[ "$BODY_LOWER" == *"ูุงฺฏ"* ]] || [[ "$BODY_LOWER" == *"ุฎุทุง"* ]] || [[ "$BODY_LOWER" == *"error"* ]]; then
            RESPONSE="๐ **ูุดุงูุฏู ูุงฺฏโูุง**
            
ุจุฑุง ุฏุฏู ูุงฺฏโูุง ฺฉุงูู:
1. ุจุฑู ุจู ุชุจ **Actions**
2. ุงูุชุฎุงุจ workflow ููุฑุฏ ูุธุฑ
3. ฺฉูฺฉ ุฑู ุขุฎุฑู ุงุฌุฑุง
4. ุจุฎุด **logs** ุฑู ุจุจู

๐ **ูุงฺฏโูุง Collector:** ุชู Artifact ูุงุจู ุฏุงูููุฏู (ุงฺฏู fail ุดู)"

          # โน๏ธ ุฏุฑุจุงุฑู
          elif [[ "$BODY_LOWER" == *"/about"* ]] || [[ "$BODY_LOWER" == *"ุฏุฑุจุงุฑู"* ]] || [[ "$BODY_LOWER" == *"ุฑุจุงุช"* ]] || [[ "$BODY_LOWER" == *"ุชู ฺฉ ูุณุช"* ]]; then
            RESPONSE="๐ค **ุฏุฑุจุงุฑู GitClaw-V2Ray**
            
๐ **ูุณุฎู:** 2.0 Pro
โก **ููุน:** Rule-based Bot (ุจุฏูู AI)
๐ฐ **ูุฒูู:** 100% ุฑุงฺฏุงู!
๐ **ุงููุช:** ูฺ ุฏุงุฏูโุง ุจู ุจุฑูู ููุฑู

๐๏ธ **ูุงุจูุชโูุง:**
โข ุฌูุนโุขูุฑ ุฎูุฏฺฉุงุฑ ฺฉุงููฺฏ V2Ray
โข ูพุดุชุจุงู ุงุฒ VLESS, VMESS, Trojan, SS
โข ููุชุฑ ISP ู ูพุฑูุชฺฉู
โข ุฌุณุชุฌู ูพุดุฑูุชู
โข ุขูุงุฑ ู ฺฏุฒุงุฑุดโฺฏุฑ

๐จโ๐ป **ุณุงุฒูุฏู:** MahanKenway
๐ **ุณุงู:** 2026

๐ก **ูฺฉุชู:** ูู ููุด ูุตููุน ูุฏุงุฑู ูู ุณุฑุนุ ุฏูู ู ุฑุงฺฏุงูู! ๐"

          # โค๏ธ ุชุดฺฉุฑ
          elif [[ "$BODY_LOWER" == *"ููููู"* ]] || [[ "$BODY_LOWER" == *"ุชุดฺฉุฑ"* ]] || [[ "$BODY_LOWER" == *"ูุฑุณ"* ]] || [[ "$BODY_LOWER" == *"thanks"* ]] || [[ "$BODY_LOWER" == *"thank you"* ]]; then
            RESPONSE="โค๏ธ **ุฎูุงูุด ูโฺฉูู $ISSUE_USER ุนุฒุฒ!** 
            
ุฎูุดุญุงูู ฺฉู ฺฉูฺฉ ฺฉุฑุฏู ๐

ุงฺฏู ุณูุงู ุฏฺฏูโุง ุฏุงุฑุ ุฏุฑ ุฎุฏูุชู! ๐"

          # ๐ ุฌูฺฉ
          elif [[ "$BODY_LOWER" == *"ุฌูฺฉ"* ]] || [[ "$BODY_LOWER" == *"ุฎูุฏ"* ]] || [[ "$BODY_LOWER" == *"joke"* ]]; then
            JOKES=(
              "ฺุฑุง ฺฉุงููพูุชุฑ ููโุชููู ุฏุฑูุบ ุจฺฏูุ ๐ค ฺูู ููุช ฺฉุฑุงุด ูโฺฉููุ ููู ฺู ูู ูุฏู! ๐"
              "ุจุฑูุงููโููุณ ููุช ูโูุฑู ุจู ุจูุดุช ูุฑู ุง ุฌูููุ ๐ค ุจู GitHub! ๐"
              "ฺุฑุง V2Ray ุณุฑุนูุ ๐ ฺูู ููุดู ุงุฒ ููุชุฑ ุฑุฏ ูโุดู! ๐"
              "Collector ูุง ูุซู ุฒูุจูุฑ ุนุณูู ๐ ููุดู ุฏุงุฑู ฺฉุงููฺฏ ุฌูุนโุขูุฑ ูโฺฉูู!"
              "ฺุฑุง GitHub Actions ุฎุณุชู ูุณุชุ ๐ด ฺูู ูุฑ ฒ ุณุงุนุช ู ููุณ ูฺฉุดู! ๐"
            )
            RANDOM_JOKE=${JOKES[$RANDOM % ${#JOKES[@]}]}
            RESPONSE="๐ $RANDOM_JOKE"

          # ๐ฑ ูุดุช ุชููพ ุฌุงุฏู
          elif [[ "$BODY_LOWER" == *"/8ball"* ]] || [[ "$BODY_LOWER" == *"ูุดุช ุชููพ"* ]] || [[ "$BODY_LOWER" == *"ุขูุฏู"* ]] || [[ "$BODY_LOWER" == *"ูุงู"* ]]; then
            ANSWERS=(
              "โ **ุจููุ ูุทุนู!**"
              "โ **ุฎุฑุ ุงุตูุงู!**"
              "๐ค **ุดุงุฏ...**"
              "โณ **ุตุจุฑ ฺฉู ุจุจูู**"
              "๐ฏ **ุงุญุชูุงู ุฒุงุฏ**"
              "๐ **ูุทุนุงู ุขุฑู!**"
              "๐ด **ุจุฎูุงุจ ุจุจู ฺ ูุดู**"
              "๐ **ุจุฒู ุจุฑู!**"
            )
            RANDOM_ANSWER=${ANSWERS[$RANDOM % ${#ANSWERS[@]}]}
            RESPONSE="๐ฑ **ูุดุช ุชููพ ุฌุงุฏู ูฺฏู:**
            
$RANDOM_ANSWER"

          # ๐ ูพูฺฏ ูพูฺฏ
          elif [[ "$BODY_LOWER" == *"ูพูฺฏ"* ]] && [[ "$BODY_LOWER" == *"ูพููฺฏ"* ]]; then
            RESPONSE="๐ **ูพููฺฏ!**
            
ูู ุขูุงุฏูโุงู! ๐"

          # ๐คท ููููุฏู
          else
            RESPONSE="๐ค **ูุชูุฌู ูุดุฏู $ISSUE_USER!**
            
ูู ุฑุจุงุช ุณุงุฏูโุง ูุณุชู ู ููู ฺ ุฑู ููโูููู ๐

๐ **ุฏุณุชูุฑุงุช ูพุฑฺฉุงุฑุจุฑุฏ:**
โข **ุณูุงู** โ ุฎูุดโุขูุฏ
โข **ุขูพุฏุช** โ ุฌูุนโุขูุฑ ฺฉุงููฺฏ
โข **ูุถุนุช** โ ุขูุงุฑ ฺฉุงููฺฏโูุง
โข **ุฑุงูููุง** โ ูุณุช ฺฉุงูู ุฏุณุชูุฑุงุช

๐ก **ูฺฉุชู:** ูู ููุด ูุตููุน ูุฏุงุฑูุ ููุท ฺฉุฏููุณ ุดุฏู! ๐ค

ฺุฒ ฺฉู ููุดุช: ยซ$ISSUE_BODYยป"
          fi
          
          # ุงุฑุณุงู ูพุงุณุฎ ููุง
          send_response "$RESPONSE"
